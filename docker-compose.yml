version: "3.9"
services:
  # PostgreSQL service (optional - uncomment if you want to use Postgres instead of SQLite)
  # db:
  #   image: postgres:16-alpine
  #   environment:
  #     POSTGRES_DB: eld
  #     POSTGRES_USER: eld
  #     POSTGRES_PASSWORD: eld
  #   ports:
  #     - "5432:5432"
  #   volumes:
  #     - db-data:/var/lib/postgresql/data

  api:
    build: ./api
    environment:
      # DATABASE_URL not set = defaults to SQLite (api/db.sqlite3)
      # To use Postgres, uncomment db service above and set: DATABASE_URL: postgres://eld:eld@db:5432/eld
      DJANGO_ALLOWED_HOSTS: localhost,127.0.0.1
      DJANGO_DEBUG: "false"
      CORS_ALLOW_ALL: "true"
    ports:
      - "8000:8000"
    # depends_on:
    #   - db
    volumes:
      - ./api:/app
      - ./api/db.sqlite3:/app/db.sqlite3 # Persist SQLite database

# volumes:
#   db-data:
